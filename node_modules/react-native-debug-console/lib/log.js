var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.proxyConsole=void 0;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _objectSpread3=_interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var proxyConsole=global.console;exports.proxyConsole=proxyConsole;var Log=function(){function Log(){(0,_classCallCheck2.default)(this,Log);this.logs=[];this.listeners=[];this.clear=this.clear.bind(this);this.get=this.get.bind(this);this.handleError=this.handleError.bind(this);}(0,_createClass2.default)(Log,[{key:"listen",value:function listen(fn){this.listeners.push(fn);fn(this.logs);}},{key:"unlisten",value:function unlisten(fn){this.listeners=this.listeners.filter(function(l){return l!==fn;});}},{key:"clear",value:function clear(){var _this=this;this.logs=[];this.listeners.forEach(function(l){return l(_this.logs);});}},{key:"get",value:function get(){return this.logs;}},{key:"log",value:function log(type,data,keep){var _this2=this;if(data&&data[0]&&data[0].indexOf&&data[0].indexOf('Warning: Using the "className" prop on')===0){return;}var entry={type:type,data:data};this.logs.push(entry);this.listeners.forEach(function(l){return l(_this2.logs);});if(keep){proxyConsole[type].apply(proxyConsole,(0,_toConsumableArray2.default)(data));}}},{key:"info",value:function info(data,keep){this.log('info',data,keep);}},{key:"error",value:function error(data,keep){this.log('error',data,keep);}},{key:"warn",value:function warn(data,keep){this.log('warn',data,keep);}},{key:"debug",value:function debug(data,keep){this.log('debug',data,keep);}},{key:"handleError",value:function handleError(err){if(err&&err.error){this.error([err.error]);}}},{key:"attach",value:function attach(keep){var _this3=this;var redirected=Object.keys(proxyConsole).reduce(function(output,key){return(0,_objectSpread3.default)({},output,(0,_defineProperty2.default)({},key,keep?function(){return proxyConsole[key].apply(proxyConsole,arguments);}:function(){}));},{});global.console=(0,_objectSpread3.default)({},redirected,{error:function error(){for(var _len=arguments.length,data=new Array(_len),_key=0;_key<_len;_key++){data[_key]=arguments[_key];}return _this3.error(data,keep);},warn:function warn(){for(var _len2=arguments.length,data=new Array(_len2),_key2=0;_key2<_len2;_key2++){data[_key2]=arguments[_key2];}return _this3.warn(data,keep);},info:function info(){for(var _len3=arguments.length,data=new Array(_len3),_key3=0;_key3<_len3;_key3++){data[_key3]=arguments[_key3];}return _this3.info(data,keep);},log:function log(){for(var _len4=arguments.length,data=new Array(_len4),_key4=0;_key4<_len4;_key4++){data[_key4]=arguments[_key4];}return _this3.info(data,keep);},debug:function debug(){for(var _len5=arguments.length,data=new Array(_len5),_key5=0;_key5<_len5;_key5++){data[_key5]=arguments[_key5];}return _this3.debug(data,keep);},verbose:function verbose(){for(var _len6=arguments.length,data=new Array(_len6),_key6=0;_key6<_len6;_key6++){data[_key6]=arguments[_key6];}return _this3.debug(data,keep);}});if(global.addEventListener){global.addEventListener('error',this.handleError);}}},{key:"detach",value:function detach(){overrides.forEach(function(key){window.console[key]=proxies[key];});if(global.removeEventListener){global.removeEventListener('error',this.handleError);}}}]);return Log;}();var log=new Log();var _default=log;exports.default=_default;