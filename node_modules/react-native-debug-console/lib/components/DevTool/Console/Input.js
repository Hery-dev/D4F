var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _construct2=_interopRequireDefault(require("@babel/runtime/helpers/construct"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _taggedTemplateLiteralLoose2=_interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteralLoose"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _native=_interopRequireDefault(require("styled-components/native"));var _console=require("../../../console");var _Icon=_interopRequireDefault(require("../../base/Icon"));var _jsxFileName="/home/alice/work/react-native-debug-console/packages/lib/src/components/DevTool/Console/Input.js";function _templateObject(){var data=(0,_taggedTemplateLiteralLoose2.default)(["\n  padding: 12px 8px;\n"]);_templateObject=function _templateObject(){return data;};return data;}var Button=_native.default.TouchableOpacity(_templateObject());var styles=_reactNative.StyleSheet.create({container:{borderColor:'#ccc',borderTopWidth:1,flexDirection:'row',alignItems:'center',paddingLeft:10,paddingRight:10},input:{flex:1,fontFamily:'Menlo-Regular',borderColor:'#ccc',borderRadius:5,margin:10,padding:5}});var Input=function Input(_ref){var provider=_ref.provider,baseContext=_ref.context;var _useState=(0,_react.useState)(''),_useState2=(0,_slicedToArray2.default)(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=(0,_react.useState)([]),_useState4=(0,_slicedToArray2.default)(_useState3,2),history=_useState4[0],setHistory=_useState4[1];var _useState5=(0,_react.useState)(),_useState6=(0,_slicedToArray2.default)(_useState5,2),historyOffset=_useState6[0],setHistoryOffset=_useState6[1];var send=function send(){var newHistory=[].concat((0,_toConsumableArray2.default)(history),[text]);var context=(0,_console.createContext)({logProvider:provider},baseContext);var contextKeys=Object.keys(context);var contextValues=Object.values(context);var fn=(0,_construct2.default)(Function,(0,_toConsumableArray2.default)(contextKeys).concat([text]));try{fn.apply(void 0,(0,_toConsumableArray2.default)(contextValues));setText('');setHistoryOffset(undefined);setHistory(newHistory);}catch(err){provider.error([err]);}};return _react.default.createElement(_reactNative.View,{style:styles.container,__source:{fileName:_jsxFileName,lineNumber:61}},_react.default.createElement(Button,{onPress:function onPress(){var currentOffset=typeof historyOffset==='undefined'?-1:historyOffset;currentOffset+=1;var index=history.length-1-currentOffset;if(history[index]){setText(history[index]);setHistoryOffset(currentOffset);}},__source:{fileName:_jsxFileName,lineNumber:62}},_react.default.createElement(_Icon.default,{name:"left",__source:{fileName:_jsxFileName,lineNumber:73}})),_react.default.createElement(Button,{title:">",onPress:function onPress(){var currentOffset=typeof historyOffset==='undefined'?-1:historyOffset;currentOffset-=1;var index=history.length-1-currentOffset;if(history[index]){setText(history[index]);setHistoryOffset(currentOffset);}},__source:{fileName:_jsxFileName,lineNumber:75}},_react.default.createElement(_Icon.default,{name:"right",__source:{fileName:_jsxFileName,lineNumber:87}})),_react.default.createElement(_reactNative.TextInput,{multiline:true,placeholder:"{your code here}",autoCapitalize:"none",autoCorrect:false,style:styles.input,value:text,onChangeText:function onChangeText(text){return setText(text);},onKeyPress:function onKeyPress(evt){global.proxyConsole.log(_reactNative.Platform.OS==='web'&&evt.key==='Enter'&&evt.shiftKey);if(_reactNative.Platform.OS==='web'&&evt.key==='Enter'&&!evt.shiftKey){send();return false;}},__source:{fileName:_jsxFileName,lineNumber:89}}),_react.default.createElement(Button,{onPress:function onPress(){return send();},__source:{fileName:_jsxFileName,lineNumber:105}},_react.default.createElement(_Icon.default,{name:"play",__source:{fileName:_jsxFileName,lineNumber:108}})));};var _default=Input;exports.default=_default;