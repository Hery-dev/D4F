var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _taggedTemplateLiteralLoose2=_interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteralLoose"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _native=_interopRequireDefault(require("styled-components/native"));var _reactNativeWebview=require("react-native-webview");var _text=require("../../base/text");var _JSON=_interopRequireDefault(require("../../JSON"));var _Cell=_interopRequireDefault(require("../../base/Cell"));var _CellHeader=_interopRequireDefault(require("../../base/CellHeader"));var _Tab=_interopRequireDefault(require("../Tab"));var _jsxFileName="/home/alice/work/react-native-debug-console/packages/lib/src/components/DevTool/Requests/Details.js";function _templateObject(){var data=(0,_taggedTemplateLiteralLoose2.default)(["\n  margin: 0 25px;\n"]);_templateObject=function _templateObject(){return data;};return data;}var theme={scheme:'bright',author:'chris kempson (http://chriskempson.com)',base00:'#000000',base01:'#303030',base02:'#505050',base03:'#b0b0b0',base04:'#d0d0d0',base05:'#e0e0e0',base06:'#f5f5f5',base07:'#ffffff',base08:'#fb0120',base09:'#fc6d24',base0A:'#fda331',base0B:'#a1c659',base0C:'#76c7b7',base0D:'#6fb3d2',base0E:'#d381c3',base0F:'#be643c'};var Indented=_native.default.View(_templateObject());var getResponse=function getResponse(contentType,request){if(!contentType){return null;}if(request.responseType=='blob'||request.responseType=='ArrayBuffer'){return _react.default.createElement(_text.Emphasis,{__source:{fileName:_jsxFileName,lineNumber:47}},"\uD83E\uDD16 Binary");}var contentTypes=contentType.split(';').map(function(c){return c.trim();});if(contentTypes.includes('application/json')){var data=JSON.parse(request.responseText);return _react.default.createElement(_JSON.default,{theme:theme,data:data,__source:{fileName:_jsxFileName,lineNumber:53}});}return _react.default.createElement(_text.Fixed,{selectable:true,__source:{fileName:_jsxFileName,lineNumber:56}},request.responseText);};var i=0;var Data=function Data(_ref){var url=_ref.url,method=_ref.method,status=_ref.status,headers=_ref.headers,requestHeaders=_ref.requestHeaders,_ref$args=_ref.args,args=_ref$args===void 0?[]:_ref$args;var headerInfo=Object.keys(headers).map(function(key){return key+": "+headers[key];}).join('\n');return _react.default.createElement(_reactNative.ScrollView,{__source:{fileName:_jsxFileName,lineNumber:70}},_react.default.createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:71}},_react.default.createElement(_Cell.default,{left:"Status",right:status,__source:{fileName:_jsxFileName,lineNumber:72}}),_react.default.createElement(_Cell.default,{left:"Method",right:method,__source:{fileName:_jsxFileName,lineNumber:73}}),_react.default.createElement(_Cell.default,{left:"Url",right:url,__source:{fileName:_jsxFileName,lineNumber:74}}),_react.default.createElement(_CellHeader.default,{__source:{fileName:_jsxFileName,lineNumber:75}},"Response Headers"),_react.default.createElement(Indented,{__source:{fileName:_jsxFileName,lineNumber:76}},_react.default.createElement(_text.Fixed,{__source:{fileName:_jsxFileName,lineNumber:77}},requestHeaders)),headerInfo.length>0&&_react.default.createElement(_react.Fragment,{__source:{fileName:_jsxFileName,lineNumber:82}},_react.default.createElement(_CellHeader.default,{__source:{fileName:_jsxFileName,lineNumber:83}},"Request Headers"),_react.default.createElement(Indented,{__source:{fileName:_jsxFileName,lineNumber:84}},_react.default.createElement(_text.Fixed,{selectable:true,__source:{fileName:_jsxFileName,lineNumber:85}},headerInfo))),args[0]&&_react.default.createElement(_react.Fragment,{__source:{fileName:_jsxFileName,lineNumber:92}},_react.default.createElement(_CellHeader.default,{__source:{fileName:_jsxFileName,lineNumber:93}},"Request Body"),_react.default.createElement(_text.Fixed,{selectable:true,__source:{fileName:_jsxFileName,lineNumber:94}},args[0].toString()))));};var Response=function Response(_ref2){var contentType=_ref2.contentType,request=_ref2.request;return _react.default.createElement(_reactNative.ScrollView,{__source:{fileName:_jsxFileName,lineNumber:106}},_react.default.createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:107}},getResponse(contentType,request)));};var getPreview=function getPreview(contentType,request,url){if(!contentType||request.responseType=='blob'||request.responseType=='ArrayBuffer'||!contentType){return[];}var contentTypes=contentType.split(';').map(function(c){return c.trim();});if(contentTypes.includes('text/html')){return[{name:'Preview',view:_react.default.createElement(_reactNativeWebview.WebView,{source:{html:request.responseText,baseUrl:url},style:{flex:1},__source:{fileName:_jsxFileName,lineNumber:124}})}];}return[];};var RequestDetails=function RequestDetails(props){return _react.default.createElement(_Tab.default,{tabs:[{name:'Details',view:_react.default.createElement(Data,(0,_extends2.default)({},props,{__source:{fileName:_jsxFileName,lineNumber:141}}))},{name:'Response',view:_react.default.createElement(Response,(0,_extends2.default)({},props,{__source:{fileName:_jsxFileName,lineNumber:144}}))}].concat((0,_toConsumableArray2.default)(getPreview(props.contentType,props.request,props.url))),__source:{fileName:_jsxFileName,lineNumber:138}});};var _default=RequestDetails;exports.default=_default;