var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=require("react");var useStorage=function useStorage(provider){var _useState=(0,_react.useState)({}),_useState2=(0,_slicedToArray2.default)(_useState,2),data=_useState2[0],setData=_useState2[1];var update=function update(){var keys,values,data,i,key,value;return _regenerator.default.async(function update$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator.default.awrap(provider.getAllKeys());case 2:keys=_context.sent;_context.next=5;return _regenerator.default.awrap(Promise.all(keys.map(function(key){return provider.getItem(key);})));case 5:values=_context.sent;data={};for(i=0;i<keys.length;i++){key=keys[i];value=values[i];data[key]=value;}setData(data);case 9:case"end":return _context.stop();}}});};var removeItem=function removeItem(name){return _regenerator.default.async(function removeItem$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regenerator.default.awrap(provider.removeItem(name));case 2:_context2.next=4;return _regenerator.default.awrap(update());case 4:case"end":return _context2.stop();}}});};var clear=function clear(){return _regenerator.default.async(function clear$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _regenerator.default.awrap(provider.clear());case 2:_context3.next=4;return _regenerator.default.awrap(update());case 4:case"end":return _context3.stop();}}});};(0,_react.useEffect)(function(){update().catch(function(err){return console.error(err);});},[]);return{data:data,update:update,removeItem:removeItem,clear:clear};};var _default=useStorage;exports.default=_default;